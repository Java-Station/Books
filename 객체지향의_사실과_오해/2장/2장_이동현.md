# 이상한 나라의 객체

- 정리
  - 상태는 특정 시점에 객체가 가지고 있는 정보의 집합 객체의 상태는 객체에 존재하는 정적인 프로퍼티와 동적인 프로퍼티 값으로 구성
  - 객체의 상태를 변경하는 것은 행동이며 외부에서 객체가 외부에 노출하는 것은 행동 뿐이고 외부에서 접근하는 방법 또한 행동뿐이다.
- 목차
  - 객체지향과 인지 능력
  - 객체, 그리고 이상한 나라
  - 객체, 그리고 소프트웨어 나라
  - 기계로서의 객체
  - 행동이 상태를 결정한다
  - 은유와 객체


# 객체지향과 인지 능력

주위를 둘러보면 객체라고 부를 수 있는 다양한 존재가 있다. 길을 걷는 사람들, 도로 위를 미끄러지듯 지나가는 자동차 등등 다른 사물과 구분할 수 있는 모든 것들이 모여 객체의 스펙트럼을 형성한다.

인간이 직접적으로 지각하는 대부분의 객체는 물리적 경계를 가진 객체 이지만 인간의 인지 능력은 개념적으로 경계 지을 수 있다. 따라서 추상적인 사물까지도 객체로 인식 가능하다.

# 객체, 그리고 이상한 나라

이상한 나라의 엘리스의 얘기를 모르는 사람은 없을 것이다. 앨리스는 정원으로 가는 길을 가로 막고 있는 문을 통과하기 위해 자신의 키를 줄이거나 늘린다. 즉 문을 통과하기 위해 자신의 ***상태***를 변화 시킨 것이다. 이때 앨리스의 키를 변화 시키는 것은 앨리스의 **행동**이다.

- **즉 앨리스의 상태를 결정하는 것은 행동**
- **행동의 결과를 결정하는 것은 상태**

앨리스의 키가 130이라 가정할때 케이크를 먹는 행동을 하게 되면 150cm 가 커진다고 해보자.

이때 케이크를 먹는다는 행동으로인해 키( 상태 )가 280으로 변해 문을 통과하지 못하는 결과가 발생한다.

따라서 **행동의 결과는 상태에 의존적이 된다.**

# 객체, 그리고 소프트웨어 나라

객체의 다양한 특성을 효과적으로 설명하기 위해서는 객체를 **상태, 행동, 식별자**를 지닌 실체로 보는 것이 가장 효과적이다.

![](https://velog.velcdn.com/images/donglee99/post/befd146c-840d-4bd5-b510-2f1fac4530ca/image.png)


객체의 상태는 단순한 값과 객체의 조합으로 표현할 수 있다. 이때 객체의 상태를 구성하는 모든 특징을 통틀어 객체의 **프로퍼티** 라고 한다. (앨리스의 경우 키, 위치, 음료)

![](https://velog.velcdn.com/images/donglee99/post/e28728b8-41f3-49e0-8591-a1e53476172e/image.png)


앨리스의 키가 줄고 위치가 정원으로 바뀐 것을 볼 수 있다. 이 그림은 앨리스가 음료에 대하여 알지 못하는 상태임을 의미한다. 이처럼 객체의 의미있는 연결을 링크 라고 한다.

객체는 링크가 존재해야만 메세지를 주고 받을 수 있다. 따라서 위의 그림은 링크가 존재하지 않기 때문에 서로 협력이 불가능 하다. **링크는 객체가 다른 객체를 참조 할 수 있음을 의미하고 한 객체가 다른 객체의 식별자를 알고 있는 것으로 표현된다.**

객체 간의 선으로 표현되는 링크와 달리 객체를 구성하는 단순한 값은 속성(attribute)이라고 한다. ( 키와 위치는 속성 )

❗️ **객체는 다른 객체의 상태에 직접적으로 접근할 수도, 상태를 변경할 수도 없다.**

- 자율적인 객체는 스스로의 상태에 책임을 가져야 하고 외부의 객체가 직접적으로 객체의 상태를 주무를 수 없다면 간접적으로 접근 할
- 객체는 스스로의 행동에 의해서만 상태가 변경되는 것을 보장함으로써 객체의 자율성을 유지한다.

### 행동

객체의 상태는 저절로 변경되지 않는다. **객체의 상태를 변경하는 것은 객체의 자발적인 행동뿐**

- 앨리스가 키가 작아진 이유는 앨리스가 음료를 마셨기 때문
- 앨리스의 위치가 바뀐것은 앨리스가 스스로 문을 통과했기 때문

상태와 행동의 연관관계

- 객체의 행동은 상태에 영향을 받는다.
- 객체의 행동은 상태를 변경시킨다.

### 상태의 캡슐화

현실세계의 객체와 객체지향 세계의 객체 사이에는 중요한 차이점이 있다. 현실 속에서의 앨리스는 스스로 음료를 마시는 능동적인 존재지만 음료는 스스로 아무것도 할수 없는 수동적인 존재다. 현실에서의 음료의 상태를 변화시키는 주체는 앨리스 이다.

그러나 객체지향 세계에서는 모든 객체의 상태는 스스로 관리한다. 따라서 음료 객체의 양을 줄이는 것은 음료 스스로 여야 한다. 따라서 앨리스는 음료의 상태를 변경할 수 없다.

![](https://velog.velcdn.com/images/donglee99/post/7ace359e-0f34-4a9d-858e-9f993b24071e/image.png)


앨리스에게 전달되는 메세지는 drinkBeverage() 이고 음료에게 전달되는 메세지는 drunken(quantity)다.

두 메세지를 보고 앨리스의 키가 줄어든다거나 음료의 양이 줄어드는 상태 변경을 예상할 수 있겠는가?

메세지 송신자는 메세지 수신자의 상태 변경에 대해 전혀 알지 못한다.

**캡슐화는 객체 상태를 캡슐 안에 감춰둔 채 외부로 노출하지 않는다. 객체가 외부에 노출하는 것은 행동 뿐이고 외부에서 접근하는 방법 또한 행동뿐이다.**

**상태를 잘 정의된 행동 집합 뒤로 캡슐화 하는 것은 객체의 자율성을 높이고 협력을 단순하고 유연하게 만든다.**

### 행동이 상태를 결정한다

상태를 중심으로 객체를 바라 보는 행동은 잘못된것이다.

상태를 먼저 결정하고 행동을 나중에 결정하는 방법은 설계에 나쁜 영향을 끼친다.

- 상태를 먼저 결정할 경우 캡슐화 저해
- 객체를 협력자가 아닌 고립된 섬으로 만든다
- 객체의 재사용성 저하